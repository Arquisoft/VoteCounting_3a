/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO BLOCKS VALUES(0,2147483647,0)
COMMIT
/*C11*/SET SCHEMA PUBLIC
drop table candidatura if exists
drop table circunscripcion if exists
drop table colegio_electoral if exists
drop table comunidad_autonoma if exists
drop table eleccion if exists
drop table voter if exists
drop table voto if exists
drop table voto_confirmado if exists
create table candidatura (id bigint generated by default as identity (start with 1), descripcion varchar(255), nombre varchar(255), programa_electoral varchar(255), eleccion bigint, primary key (id))
create table circunscripcion (id bigint generated by default as identity (start with 1), nombre varchar(255), comunidad bigint, primary key (id))
create table colegio_electoral (id bigint generated by default as identity (start with 1), nombre varchar(255), poblacion varchar(255), circunscripcion bigint, primary key (id))
create table comunidad_autonoma (id bigint generated by default as identity (start with 1), nombre varchar(255), primary key (id))
create table eleccion (id bigint generated by default as identity (start with 1), activa boolean not null, fecha_fin timestamp not null, fecha_inicio timestamp not null, hora_fin time, hora_inicio time, nombre varchar(255) not null, numero_opciones integer, primary key (id))
create table voter (id bigint generated by default as identity (start with 1), email varchar(255), nif varchar(255), nombre varchar(255), password varchar(255), colegio bigint, primary key (id))
create table voto (id bigint generated by default as identity (start with 1), colegio bigint, opcion bigint, primary key (id))
create table voto_confirmado (id bigint, ha_votado boolean not null, eleccion bigint, votante bigint, primary key (eleccion, votante))
alter table candidatura add constraint FK_tilbtj6j8teyacnkjt45f8y4j foreign key (eleccion) references eleccion
alter table circunscripcion add constraint FK_qsvvomt2hjfha7h8of0idp6xw foreign key (comunidad) references comunidad_autonoma
alter table colegio_electoral add constraint FK_ohqbjqffqvk7vsnkyfc1y60rg foreign key (circunscripcion) references circunscripcion
alter table voter add constraint FK_6l40c7l6r91fqaos802yqnvuo foreign key (colegio) references colegio_electoral
alter table voto add constraint FK_2biyyfr9xoy1xruubccvxmgks foreign key (colegio) references colegio_electoral
alter table voto add constraint FK_jwnfqyewn88y6x4t26htivo50 foreign key (opcion) references candidatura
alter table voto_confirmado add constraint FK_skfwpa8jn6wyy4a7u4v4wr7c7 foreign key (eleccion) references eleccion
alter table voto_confirmado add constraint FK_f9wiwynl36bt74ne833ae0bwo foreign key (votante) references voter
